{"version":3,"sources":["webpack:///./src/components/clock/clock.js","webpack:///./src/components/cards/cards.js","webpack:///./src/components/information/information.js","webpack:///./src/pages/index.js"],"names":["Clock","props","_this","_React$Component","call","this","getCurrentDate","Date","toLocaleDateString","weekday","month","day","getCurrentTime","time","toLocaleTimeString","hour","minute","setState","date","state","componentDidMount","_this2","timer","setInterval","componentWillUnmount","clearInterval","render","react_default","a","createElement","className","styles","clock","React","Component","Cards","getReservations","fetch","config","Rpi3APIAddress","Rpi3APIPort","then","response","json","reservations","catch","error","console","log","updateCurrentTime","currentHour","getHours","currentMinutes","getMinutes","getCard","r","i","split","key","card","subject","study","classroom","professor","createCards","cards","_iterator","entries","_isArray","Array","isArray","_i","Symbol","iterator","_ref","length","next","done","value","_ref2","push","endCard","require","e","Error","code","_unused","Information","getValues","Rpi2APIAddress","Rpi2APIPort","cpdStatus","message","marquee","__webpack_exports__","Helmet","charSet","http-equiv","content","cards_cards","information"],"mappings":"gKAiDeA,cA7Cb,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OACjBA,EAAAC,EAAAC,KAAAC,KAAMJ,IAANI,MASFC,eAAiB,WACf,OAAO,IAAIC,MAAOC,mBAAmB,QAAS,CAAEC,QAAS,OAAQC,MAAO,OAAQC,IAAK,aAXpET,EAiBnBU,eAAiB,WACf,IAAIC,GAAO,IAAIN,MAAOO,mBAAmB,QAAS,CAACC,KAAM,UAAWC,OAAO,YAI3E,MAHa,UAATH,GACFX,EAAKe,SAAS,CAACC,KAAOhB,EAAKI,mBAEtBO,GApBPX,EAAKiB,MAAQ,CACXN,KAAOX,EAAKU,iBACZM,KAAOhB,EAAKI,kBAJGJ,sCAyBnBkB,kBAAA,WAAoB,IAAAC,EAAAhB,KAClBA,KAAKiB,MAAQC,YAAY,WACvBF,EAAKJ,SAAS,CAACJ,KAAOQ,EAAKT,oBAC1B,QAGLY,qBAAA,WACEC,cAAcpB,KAAKiB,UAGrBI,OAAA,WACE,OACEC,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOC,OACrBL,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOb,MAAOb,KAAKc,MAAMD,KAAzC,KACAS,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOlB,MAAOR,KAAKc,MAAMN,WAxC7BoB,IAAMC,+DC2FXC,cAzFb,SAAAA,EAAYlC,GAAO,IAAAC,GACjBA,EAAAC,EAAAC,KAAAC,KAAMJ,IAANI,MAgBF+B,gBAAkB,WAChBC,MAAM,UAAYnC,EAAKoC,OAAOC,eAAiB,IAAMrC,EAAKoC,OAAOE,YAAc,iBAC5EC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAE,GAAI,OAAIzC,EAAKe,SAAS,CAAC2B,aAAcD,MAC1CE,MAAM,SAAAC,GAAK,OAAIC,QAAQC,IAAI,iBAAkBF,MArB/B5C,EA2BnB+C,kBAAoB,WAClB,IAAI/B,EAAO,IAAIX,KACfL,EAAKgD,YAAchC,EAAKiC,WACxBjD,EAAKkD,eAAiBlC,EAAKmC,cA9BVnD,EAsCnBoD,QAAU,SAACC,EAAGC,GACZ,IAAI3C,EAAO0C,EAAC,QAAYE,MAAM,KAC9B,OAAIvD,EAAKgD,YAAcrC,EAAK,IAAOX,EAAKgD,aAAerC,EAAK,IAAMX,EAAKkD,eAAiBvC,EAAK,GACpFc,EAAAC,EAAAC,cAAA,OAAK6B,IAAKF,EAAG1B,UAAWC,IAAO4B,MACpChC,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAO6B,SAAUL,EAAC,SAClC5B,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAO8B,OAAQN,EAAC,OAChC5B,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAO+B,WAAYP,EAAC,UAApC,OAAuDA,EAAC,UAAxD,MAA0EA,EAAC,SAC3E5B,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOgC,WAAYR,EAAC,YAGjC,MAhDUrD,EAsDnB8D,YAAc,WACZ9D,EAAK+C,oBACL,IAAIgB,EAAQ,GACZC,EAAqBhE,EAAKiB,MAAMyB,aAAauB,UAA7CC,EAAAC,MAAAC,QAAAJ,GAAAK,EAAA,MAAAL,EAAAE,EAAAF,IAAAM,OAAAC,cAAwD,KAAAC,EAAA,GAAAN,EAAA,IAAAG,GAAAL,EAAAS,OAAA,MAAAD,EAAAR,EAAAK,SAAA,KAAAA,EAAAL,EAAAU,QAAAC,KAAA,MAAAH,EAAAH,EAAAO,MAAA,IAAAC,EAAAL,EAA5ClB,EAA4CuB,EAAA,GAAzCxB,EAAyCwB,EAAA,GAKtD,GAHY,MADD7E,EAAKoD,QAAQC,EAAGC,IAEzBS,EAAMe,KAAK9E,EAAKoD,QAAQC,EAAGC,IAER,IAAjBS,EAAMU,OACR,MAGJ,OAAqB,IAAjBV,EAAMU,OACDV,EAEFtC,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOkD,SAAvB,8EAnEP/E,EAAKiB,MAAQ,CACXyB,aAAc,IAEhB1C,EAAKgD,YAAc,EACnBhD,EAAKkD,eAAiB,EACtB,IACElD,EAAKoC,OAAS4C,GAAQ,eAAAC,EAAA,IAAAC,MAAA,kDAAAD,EAAAE,KAAA,mBAAAF,EAAA,IACtB,MAAAG,GACApF,EAAKoC,OAAS4C,EAAQ,KAVP,OAAAhF,sCAwEnBwB,OAAA,WACE,OACErB,KAAK2D,iBAIT5C,kBAAA,WAAoB,IAAAC,EAAAhB,KAClBA,KAAK+B,kBACL/B,KAAKiB,MAAQC,YAAY,WACvBF,EAAKe,mBACJ,QAELZ,qBAAA,WACEC,cAAcpB,KAAKiB,WAtFHW,IAAMC,6BC6CXqD,cA7Cb,SAAAA,EAAYtF,GAAO,IAAAC,GACjBA,EAAAC,EAAAC,KAAAC,KAAMJ,IAANI,MAWFmF,UAAY,WACVnD,MAAM,UAAYnC,EAAKoC,OAAOmD,eAAiB,IAAMvF,EAAKoC,OAAOoD,YAAc,eAC5EjD,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAE,GAAI,OAAIzC,EAAKe,SAAS,CAAC0E,UAAWhD,MACvCE,MAAM,SAAAC,GAAK,OAAIC,QAAQC,IAAI,iBAAkBF,MAdhD5C,EAAKiB,MAAQ,CACXwE,UAAY,IAEd,IACEzF,EAAKoC,OAAS4C,GAAQ,eAAAC,EAAA,IAAAC,MAAA,kDAAAD,EAAAE,KAAA,mBAAAF,EAAA,IACtB,MAAAG,GACApF,EAAKoC,OAAS4C,EAAQ,KARP,OAAAhF,sCAmBnBkB,kBAAA,WAAoB,IAAAC,EAAAhB,KAClBA,KAAKmF,YACLnF,KAAKiB,MAAQC,YAAY,WACvBF,EAAKmE,aACJ,QAGLhE,qBAAA,WACEC,cAAcpB,KAAKiB,UAGrBI,OAAA,WACE,IAGIkE,EAHO,kCAAoCvF,KAAKc,MAAMwE,UAAX,YAAsC,MAGhE,WAFX,gCAAkCtF,KAAKc,MAAMwE,UAAX,SAAmC,MAExC,WAD7B,sCAAwCtF,KAAKc,MAAMwE,UAAU,yBAA2B,KACzC,gBACzD,OACEhE,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAO8D,SACrBlE,EAAAC,EAAAC,cAAA,WAAM+D,GACNjE,EAAAC,EAAAC,cAAA,WAAM+D,GACNjE,EAAAC,EAAAC,cAAA,WAAM+D,QAxCY3D,IAAMC,WCIjB4D,EAAA,0BACbnE,EAAAC,EAAAC,cAAA,OAAKC,UAAU,WACbH,EAAAC,EAAAC,cAACkE,EAAA,OAAD,KACEpE,EAAAC,EAAAC,cAAA,QAAMmE,QAAQ,UACdrE,EAAAC,EAAAC,cAAA,oBACAF,EAAAC,EAAAC,cAAA,QAAMoE,aAAW,mBAAmBC,QAAQ,QAE9CvE,EAAAC,EAAAC,cAAA,UAAQC,UAAU,UAChBH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eAEbH,EAAAC,EAAAC,cAAA,0DAEFF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,YACbH,EAAAC,EAAAC,cAACG,EAAD,QAGJL,EAAAC,EAAAC,cAAA,QAAMC,UAAU,QACdH,EAAAC,EAAAC,cAACsE,EAAD,OAEFxE,EAAAC,EAAAC,cAAA,SAAOC,UAAU,UAEjBH,EAAAC,EAAAC,cAAA,UAAQC,UAAU,UAChBH,EAAAC,EAAAC,cAACuE,EAAD","file":"component---src-pages-index-js-e0d0182df844a3abbfa6.js","sourcesContent":["import React from \"react\"\nimport styles from \"./clock.module.css\"\n\nclass Clock extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      time : this.getCurrentTime(),\n      date : this.getCurrentDate()\n    }\n  }\n  /**\n   * Gets current date\n   */\n  getCurrentDate = () => {\n    return new Date().toLocaleDateString(\"es-ES\", { weekday: 'long', month: 'long', day: 'numeric' });\n  }\n\n  /**\n   * Gets current time\n   */\n  getCurrentTime = () => {\n    let time = new Date().toLocaleTimeString(\"es-ES\", {hour: \"2-digit\", minute:\"2-digit\"});\n    if (time === \"00:00\") {\n      this.setState({date : this.getCurrentDate()})\n    }\n    return time;\n  }\n\n  componentDidMount() {\n    this.timer = setInterval(() => {\n      this.setState({time : this.getCurrentTime()});\n    }, 10000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timer);\n  }\n  \n  render() {\n    return (\n      <div className={styles.clock}>\n        <div className={styles.date}>{this.state.date},</div>\n        <div className={styles.time}>{this.state.time}</div>\n      </div>\n    );\n  }\n}\n\nexport default Clock;","import React from \"react\"\nimport styles from \"./cards.module.css\"\n\n\nclass Cards extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      reservations: []\n    }\n    this.currentHour = 0\n    this.currentMinutes = 0\n    try { // Load config\n      this.config = require(\"/etc/rpi3_conf.json\")\n    } catch {\n      this.config = require(\"../../../../../config.json\")\n    }\n  }\n\n  /**\n   * Makes HTTP GET request to rpi3 API to get JSON including today reservations\n   */\n  getReservations = () => {\n    fetch(\"http://\" + this.config.Rpi3APIAddress + \":\" + this.config.Rpi3APIPort + \"/reservations\")\n      .then(response => response.json())\n      .then(json => this.setState({reservations: json}))\n      .catch(error => console.log('Request failed', error))\n  }\n\n  /**\n   * Updates the current time, used to display only future reservations\n   */\n  updateCurrentTime = () => {\n    let date = new Date();\n    this.currentHour = date.getHours();\n    this.currentMinutes = date.getMinutes();\n  }\n\n  /**\n   * Returns the html <div> object of a reservation\n   * @param {reservation dict}  r dictionary with all info of a reservation\n   * @param {int}               i index to set as react key of the div\n   */\n  getCard = (r, i) => {\n    let time = r[\"EndTime\"].split(\":\")\n    if (this.currentHour < time[0] || (this.currentHour == time[0] && this.currentMinutes < time[1])) {\n      return <div key={i} className={styles.card}>\n        <div className={styles.subject}>{r[\"Subject\"]}</div>\n        <div className={styles.study}>{r[\"Study\"]}</div>\n        <div className={styles.classroom}>{r[\"Classroom\"]} de {r[\"StartTime\"]} a {r[\"EndTime\"]}</div>\n        <div className={styles.professor}>{r[\"Professor\"]}</div>\n      </div>;\n    }\n    return null\n  }\n\n  /**\n   * Returns an array of html <div>, where every <div> is a reservation card\n   */\n  createCards = () => {\n    this.updateCurrentTime()\n    let cards = []\n    for (const [i, r] of this.state.reservations.entries()) {\n      let card = this.getCard(r, i)\n      if (card != null) {\n        cards.push(this.getCard(r, i))\n      }\n      if (cards.length === 4) {\n        break;\n      }\n    }\n    if (cards.length !== 0) {\n      return cards\n    }\n    return <div className={styles.endCard}>No hay reservas para el día de hoy o ya han finalizado todas las reservas</div>\n  }\n\n  render() {\n    return ( // TODO: maybe <tag>{function()}</tag>\n      this.createCards()\n    );\n  }\n\n  componentDidMount() {\n    this.getReservations()\n    this.timer = setInterval(() => {\n      this.getReservations()\n    }, 60000);\n  }\n  componentWillUnmount() {\n    clearInterval(this.timer);\n  }\n}\n\nexport default Cards;","import React from \"react\"\nimport styles from \"./information.module.css\"\n\nclass Information extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      cpdStatus : []\n    }\n    try { // Load config\n      this.config = require(\"/etc/rpi3_conf.json\")\n    } catch {\n      this.config = require(\"../../../../../config.json\")\n    }\n  }\n\n  getValues = () => {\n    fetch(\"http://\" + this.config.Rpi2APIAddress + \":\" + this.config.Rpi2APIPort + \"/cpd-status\")\n      .then(response => response.json())\n      .then(json => this.setState({cpdStatus: json}))\n      .catch(error => console.log('Request failed', error))\n  }\n\n  componentDidMount() {\n    this.getValues()\n    this.timer = setInterval(() => {\n      this.getValues()\n    }, 60000);\n  }\n  \n  componentWillUnmount() {\n    clearInterval(this.timer);\n  }\n  \n  render() {\n    let temp = \"La temperatura en el CPD es de \" + this.state.cpdStatus[\"temperature\"] + \" ºC\"\n    let hum = \"La humedad en el CPD está al \" + this.state.cpdStatus[\"humidity\"] + \" %\"\n    let sai = \"El estado de la batería del SAI es \" + this.state.cpdStatus[\"ups status (LDI rack)\"] + \".\"\n    let message = temp + \"   •   \" + hum + \"   •   \" + sai + \"      •      \"\n    return (\n      <div className={styles.marquee}>\n        <pre>{message}</pre>\n        <pre>{message}</pre>\n        <pre>{message}</pre>\n      </div>\n    );\n  }\n}\n\nexport default Information;","import React from \"react\"\nimport { Helmet } from \"react-helmet\"\n\nimport Clock from \"../components/clock/clock.js\"\nimport Cards from \"../components/cards/cards.js\"\nimport Information from \"../components/information/information.js\"\n\nexport default () => (\n  <div className=\"wrapper\">\n    <Helmet>\n      <meta charSet=\"utf-8\" />\n      <title>LDI</title>\n      <meta http-equiv=\"Content-Language\" content=\"es\" />\n    </Helmet>\n    <header className=\"header\">\n      <div className=\"headerTitle\">\n        {/* TODO: add logo */}\n        <h1>Laboratorio del Departamento de Informática</h1>\n      </div>\n      <div className=\"datetime\">\n        <Clock/>\n      </div>\n    </header>\n    <main className=\"main\">\n      <Cards/>\n    </main>\n    <aside className=\"aside\">\n    </aside>\n    <footer className=\"footer\">\n      <Information />\n    </footer>\n  </div>\n)\n"],"sourceRoot":""}